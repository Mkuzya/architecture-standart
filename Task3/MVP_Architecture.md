### <a name="_b7urdng99y53"></a>**Название задачи:** 
Концептуальная архитектура MVP для автоматизации процесса открытия депозитов в банке "Стандарт"

### <a name="_hjk0fkfyohdk"></a>**Автор:**
Команда цифровой трансформации банка "Стандарт"

### <a name="_uanumrh8zrui"></a>**Дата:**
15 августа 2025

### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**            |**Use Case**                         |**Описание**                                                            |
| :-: | :- | :- | :- |
| UC1 | Клиент, Интернет-банк                      | Просмотр депозитов                  | Клиент просматривает список доступных депозитов с актуальными ставками |
| UC2 | Клиент, Интернет-банк, API Gateway         | Подача заявки на депозит            | Клиент заполняет форму заявки через интернет-банк                      |
| UC3 | API Gateway, Deposits Service              | Обработка заявки                    | API Gateway передает заявку в Deposits Service для валидации           |
| UC4 | Deposits Service, АБС                      | Передача заявки в АБС               | Deposits Service передает заявку в АБС через Integration API           |
| UC5 | Сотрудник бэк-офиса, АБС                   | Обработка заявки                    | Сотрудник проверяет заявку, подтверждает ставку и создает депозит      |
| UC6 | АБС, СМС-шлюз                              | СМС-подтверждение                   | АБС отправляет СМС-код для подтверждения операции                      |
| UC7 | Клиент, Интернет-банк                      | Подтверждение операции              | Клиент вводит СМС-код для подтверждения заявки                         |
| UC8 | АБС, Интернет-банк                         | Уведомление о создании депозита     | АБС отправляет уведомление в интернет-банк о создании депозита         |
| UC9 | Клиент, Сайт                               | Просмотр депозитов                  | Клиент просматривает депозиты на сайте банка                           |
| UC10 | Клиент, Сайт, Система кол-центра          | Подача заявки через сайт            | Клиент заполняет форму на сайте, данные передаются в кол-центр         |
| UC11 | Оператор кол-центра, Система кол-центра   | Консультирование клиента            | Оператор получает заявку и консультирует клиента                       |
| UC12 | АБС, Система кол-центра                   | Передача ставок                     | АБС передает актуальные ставки в систему кол-центра                    |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
| :-: | :- |
| NFR1 | Система должна обеспечивать время отклика менее 2 секунд для операций открытия депозитов |
| NFR2 | Система должна работать с доступностью 99.5% в рабочее время (8:00-20:00)                |
| NFR3 | Система должна обеспечивать безопасность данных согласно требованиям ЦБ РФ               |
| NFR4 | Система должна шифровать все данные при передаче (HTTPS/TLS)                             |
| NFR5 | Система должна обеспечивать аутентификацию и авторизацию пользователей интернет-банка    |
| NFR6 | Система должна логировать все операции открытия депозитов для аудита                     |
| NFR7 | Система должна минимизировать нагрузку на АБС через API Gateway                          |
| NFR8 | Система должна использовать существующие технологии банка (ASP.NET, Delphi, Oracle)      |
| NFR9 | Система должна обеспечивать интеграцию с существующим СМС-шлюзом                         |
| NFR10| Система должна поддерживать обработку заявок сотрудниками бэк-офиса                      |

### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения.

**Логика принятия решений:**

1. **Принцип минимальных изменений АБС:** Выбрана архитектура с API Gateway для интеграции, чтобы минимизировать изменения в устаревшей АБС на Delphi/Oracle.

2. **Использование существующих технологий:** Сохранены технологии ASP.NET MVC 4.5 для интернет-банка и Delphi/Oracle для АБС, что снижает риски и стоимость разработки.

3. **Постепенная модернизация:** MVP включает обработку заявок через бэк-офис, что позволяет запустить систему быстрее и безопаснее.

4. **Безопасность:** Выбран HTTPS для всех внешних взаимодействий и интеграция с существующим СМС-шлюзом для подтверждения операций.

5. **Масштабируемость:** API Gateway позволяет в будущем легко добавлять новые каналы (мобильное приложение, API для партнеров).

**Основные компоненты архитектуры:**

1. **API Gateway** - обеспечивает безопасную интеграцию между интернет-банком и АБС, аутентификацию и роутинг
2. **Deposits Service** - содержит бизнес-логику обработки депозитов и валидации данных
3. **Integration API** - предоставляет REST API для интеграции с АБС, минимизируя изменения в основной системе
4. **Rates Module** - модуль расчета ставок в АБС, использует существующую логику
5. **СМС-шлюз** - обеспечивает безопасное подтверждение операций через существующую интеграцию

**IT-команды и их ответственность:**

| Команда                                    | Ответственность                                    | Системы                    | Технологии                             |
|--------------------------------------------|----------------------------------------------------|----------------------------|----------------------------------------|
| **Команда интернет-банка (10 чел)**        | Разработка Web UI, API Gateway, Deposits Service   | Интернет-банк, API Gateway | ASP.NET MVC 4.5, MS SQL                |
| **Команда АБС (20 чел)**                   | Разработка Integration API, Rates Module           | АБС, Integration API       | Delphi, Oracle, PL-SQL                 |
| **Команда кол-центра (подрядчик, 10 чел)** | Разработка Back Office UI/API                      | Система кол-центра         | React.js, Java Spring Boot, PostgreSQL |
| **Команда инфраструктуры (5 чел)**         | Настройка кэширования, мониторинга, CI/CD          | Cache, мониторинг          | Redis, Docker, Kubernetes              |

**Взаимодействие систем:**

1. **Клиент ↔ Сайт/Интернет-банк:**
   - Просмотр депозитов и ставок
   - Подача заявок на депозиты
   - СМС-подтверждение операций

2. **Интернет-банк ↔ API Gateway:**
   - Передача заявок на депозиты
   - Получение актуальных ставок
   - Аутентификация и авторизация

3. **API Gateway ↔ АБС:**
   - Передача заявок в АБС через Integration API
   - Получение данных о ставках
   - Синхронизация справочников

4. **АБС ↔ Система кол-центра:**
   - Передача актуальных ставок
   - Передача данных о заявках
   - Синхронизация статусов

5. **Система кол-центра ↔ Партнерский кол-центр:**
   - Передача данных о ставках через SFTP
   - Обмен информацией о клиентах

6. **Все системы ↔ СМС-шлюз:**
   - Отправка уведомлений клиентам
   - Подтверждение операций

**Диаграммы C4:**

1. **Диаграмма контекста** показывает взаимодействие системы открытия депозитов с внешними акторами (клиенты, сотрудники, операторы) и внешними системами (СМС-шлюз, партнерский кол-центр).

2. **Диаграмма контейнеров** детализирует внутреннюю структуру основных систем:
   - **Интернет-банк:** Web UI (ASP.NET MVC 4.5), API Gateway (ASP.NET Web API), Deposits Service (ASP.NET Core), MS SQL Database
   - **АБС:** Desktop Client (Delphi), Integration API (Delphi + REST), Rates Module (PL-SQL), Oracle Database
   - **Система кол-центра:** Call Center UI (React.js), Call Center API (Spring Boot), PostgreSQL

Диаграммы представлены в файлах Context_Diagram.drawio и Container_Diagram.drawio.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

**Альтернатива 1: Прямая интеграция интернет-банка с АБС**
- **Описание:** Прямое подключение интернет-банка к базе данных АБС
- **Плюсы:** Простота реализации, низкая стоимость
- **Минусы:** Высокие риски безопасности, зависимость от структуры БД АБС, сложность поддержки

**Альтернатива 2: Полная замена АБС на современную систему**
- **Описание:** Замена устаревшей АБС на современную банковскую систему
- **Плюсы:** Современные технологии, лучшая производительность, новые возможности
- **Минусы:** Очень высокая стоимость (миллионы рублей), длительные сроки (2-3 года), высокие риски

**Альтернатива 3: Использование готового банковского решения**
- **Описание:** Приобретение готового решения для открытия депозитов
- **Плюсы:** Быстрое внедрение, проверенное решение
- **Минусы:** Высокая стоимость лицензий, зависимость от вендора, сложность интеграции с существующими системами

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

**Недостатки:**
- Сложность интеграции с устаревшей АБС на Delphi/Oracle
- Необходимость поддержки двух технологических стеков (ASP.NET и Delphi)
- Зависимость от производительности АБС при высоких нагрузках
- Ограниченная масштабируемость из-за монолитной архитектуры АБС

**Ограничения:**
- Временные ограничения (6 месяцев на MVP)
- Бюджетные ограничения (необходимость использования существующих технологий)
- Технологические ограничения устаревшей АБС (Delphi, Oracle)
- Необходимость обработки заявок через бэк-офис в MVP

**Риски:**
- Риск перегрузки АБС при высокой частоте запросов от интернет-банка
- Риск потери данных при сбоях в сети между интернет-банком и АБС
- Риск несогласованности данных между MS SQL и Oracle
- Риск задержек в обработке заявок из-за ручного участия сотрудников бэк-офиса
- Риск проблем с безопасностью при интеграции устаревших и современных систем

**Оценка сроков и стоимости:**

**Сроки реализации MVP (6 месяцев):**
- Месяц 1-2: Разработка API Gateway и Integration API
- Месяц 2-3: Разработка Deposits Service и Rates Service
- Месяц 3-4: Интеграция с АБС и тестирование
- Месяц 4-5: Разработка UI и интеграция с кол-центром
- Месяц 5-6: Тестирование, документация, развертывание

**Распределение команды по этапам:**
- **Команда интернет-банка (10 чел)** - полная загрузка 6 месяцев
- **Команда АБС (20 чел)** - 50% загрузка 4 месяца (Integration API)
- **Команда кол-центра (10 чел)** - полная загрузка 3 месяца
- **Команда инфраструктуры (5 чел)** - 30% загрузка 6 месяцев

**Критические зависимости:**
- Завершение Integration API в АБС перед интеграцией
- Готовность API Gateway перед разработкой Deposits Service
- Настройка инфраструктуры перед развертыванием
