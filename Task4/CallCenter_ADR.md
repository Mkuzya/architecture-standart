### <a name="_b7urdng99y53"></a>**Название задачи:** 
Архитектурное решение для автоматической передачи ставок по депозитам из АБС в систему кол-центра

### <a name="_hjk0fkfyohdk"></a>**Автор:**
Команда цифровой трансформации банка "Стандарт"

### <a name="_uanumrh8zrui"></a>**Дата:**
15 августа 2025

### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
| UC1 | АБС, API-шлюз | Изменение ставок в АБС | Сотрудник бэк-офиса изменяет ставки по депозитам в АБС |
| UC2 | АБС, API-шлюз | Обнаружение изменений | API-шлюз обнаруживает изменения ставок в АБС через polling |
| UC3 | API-шлюз, Rates Service | Передача данных о ставках | API-шлюз передает обновленные ставки в Rates Service |
| UC4 | Rates Service, Cache | Кэширование ставок | Rates Service сохраняет ставки в кэш для быстрого доступа |
| UC5 | Rates Service, Call Center API | Передача ставок в кол-центр | Rates Service передает актуальные ставки в систему кол-центра |
| UC6 | Call Center API, PostgreSQL | Сохранение ставок | Call Center API сохраняет ставки в базу данных кол-центра |
| UC7 | Call Center UI, Call Center API | Отображение ставок операторам | Операторы кол-центра видят актуальные ставки в интерфейсе |
| UC8 | Call Center API, Partner Call Center | Передача данных партнеру | Система передает ставки в партнерский кол-центр через SFTP |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
| :-: | :- |
| NFR1 | Время передачи ставок из АБС в кол-центр не более 5 минут |
| NFR2 | Доступность системы передачи ставок 99.9% |
| NFR3 | Шифрование данных при передаче между системами |
| NFR4 | Логирование всех операций передачи ставок |
| NFR5 | Возможность отката к предыдущей версии ставок |
| NFR6 | Мониторинг состояния интеграции в реальном времени |
| NFR7 | Обработка до 1000 изменений ставок в день |
| NFR8 | Совместимость с существующими версиями АБС |

### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения.

Выбранная архитектура основана на принципе асинхронной передачи данных с использованием API Gateway и кэширования. Основные компоненты:

1. **API Gateway** - обеспечивает безопасную интеграцию между АБС и внешними системами
2. **Rates Service** - обрабатывает и кэширует ставки по депозитам
3. **Call Center API** - предоставляет интерфейс для системы кол-центра
4. **SFTP Gateway** - обеспечивает безопасную передачу данных партнерам

Архитектура обеспечивает надежную передачу ставок с минимальной нагрузкой на АБС и высокой производительностью.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

**Альтернатива 1:** Прямая интеграция АБС с кол-центром через базу данных
**Альтернатива 2:** Использование файлового обмена вместо API
**Альтернатива 3:** Реализация через message queue (Kafka/RabbitMQ)

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

**Недостатки:**
- Сложность интеграции с устаревшей АБС
- Необходимость поддержки нескольких форматов данных
- Зависимость от внешних систем

**Ограничения:**
- Временные ограничения на передачу данных (5 минут)
- Необходимость использования существующих технологий
- Бюджетные ограничения на разработку

**Риски:**
- Риск перегрузки АБС при высокой частоте изменений ставок
- Риск потери данных при сбоях в сети
- Риск несогласованности данных между системами
